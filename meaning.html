<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta charset="utf-8" />
  
  <meta name="description" content="Connascence of meaning is when multiple components must agree on the meaning of particular values." />
    <title>  connascence.io: Connascence of Meaning
</title>

    <!-- Bootstrap -->
    <link href="https://connascence.io/theme/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://connascence.io/theme/css/style.css" rel="stylesheet">
    <link href="https://connascence.io/theme/css/pygments.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container-fluid">
      <div class="row contentrow">
        <div class="col-md-2 col-sm-4 col-xs-12">
          <div id="sidebar-wrapper">
            <div class="sidebar-brand">
              <h4><a href="https://connascence.io">connascence.io</a></h4>
            </div>
            <div class="panel panel-default">
              <!-- Default panel contents -->
              <div class="panel-heading">Static Connascences</div>
              <!-- List group -->
              <ul class="list-group">
                <li class="list-group-item"><a href="https://connascence.io/name.html">Name</a></li>
                <li class="list-group-item"><a href="https://connascence.io/type.html">Type</a></li>
                <li class="list-group-item"><a href="https://connascence.io/meaning.html">Meaning</a></li>
                <li class="list-group-item"><a href="https://connascence.io/position.html">Position</a></li>
                <li class="list-group-item"><a href="https://connascence.io/algorithm.html">Algorithm</a></li>
              </ul>
              <!-- Default panel contents -->
              <div class="panel-heading">Dynamic Connascences</div>
              <!-- List group -->
              <ul class="list-group">
                <li class="list-group-item"><a href="https://connascence.io/execution.html">Execution</a></li>
                <li class="list-group-item"><a href="https://connascence.io/timing.html">Timing</a></li>
                <li class="list-group-item"><a href="https://connascence.io/value.html">Value</a></li>
                <li class="list-group-item"><a href="https://connascence.io/identity.html">Identity</a></li>
              </ul>
              <!-- Default panel contents -->
              <div class="panel-heading">Properties</div>
              <!-- List group -->
              <ul class="list-group">
                <li class="list-group-item"><a href="https://connascence.io/strength.html">Strength</a></li>
                <li class="list-group-item"><a href="https://connascence.io/locality.html">Locality</a></li>
                <li class="list-group-item"><a href="https://connascence.io/degree.html">Degree</a></li>
              </ul>
              <div class="panel-heading"><a href="https://connascence.io/pages/about.html">Other Resources</a></div>
            </div>
          </div> <!-- sidebar-wrapper -->
        </div>

        <div class="col-md-10 col-sm-8 col-xs-12">
          <div id="page-content-wrapper">
            <div class="container-fluid">
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="https://connascence.io/meaning.html" rel="bookmark"
         title="Permalink to Connascence of Meaning">Connascence of Meaning</a></h2>
 
  </header>
  <div class="entry-content">
    <p>Connascence of meaning is when multiple components must agree on the meaning of particular values. Consider some code that processes credit card payments. The following function might be used to determine if a given credit card number is valid or not:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_credit_card_number_valid</span><span class="p">(</span><span class="n">card_number</span><span class="p">):</span>
    <span class="c1"># Check for &#39;test&#39; credit card numbers:</span>
    <span class="k">if</span> <span class="n">card_number</span> <span class="o">==</span> <span class="s2">&quot;9999-9999-9999-9999&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># Do normal validation:</span>
    <span class="c1"># ...</span>
</pre></div>
<p>The problem here is that all parts of this system must agree that <tt class="docutils literal"><span class="pre">9999-9999-9999-9999</span></tt> is the test credit card number. If that value changes in one place, it must also change in another.</p>
<p>Here's another example where user roles are encoded as integers:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_user_role</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">database</span><span class="o">.</span><span class="n">get_user_object_for_username</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_admin</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">2</span>
    <span class="k">elif</span> <span class="n">user</span><span class="o">.</span><span class="n">is_manager</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
</pre></div>
<p>Elsewhere, code might need to check that a given username is an administrator, like so:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">get_user_role</span><span class="p">(</span><span class="n">username</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">(</span><span class="s2">&quot;You must be an administrator&quot;</span><span class="p">)</span>
</pre></div>
<p>Connascence of meaning can be improved to connascence of name by moving the &quot;magic values&quot; to named constants, and referring to the constants instead of the values. However in doing so, we have increased the amount of connascence of name (since we now need a third location to store the constant).</p>
<p>Another common example of connascence of meaning is when <tt class="docutils literal">None</tt> is used as a return value. This frequently occurs in functions that are tasked with finding an object. If that object isn't found, the function might return <tt class="docutils literal">None</tt>.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_user_in_database</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">database</span><span class="o">.</span><span class="n">find_user</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
</pre></div>
<p>However, the function might also return None in an error condition:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_user_in_database</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">database</span><span class="o">.</span><span class="n">find_user</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="n">DatabaseError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<p>The problem in both these cases is that a semantic meaning is being assigned to the <tt class="docutils literal">None</tt> value. If multiple different meanings are assigned to the same <tt class="docutils literal">None</tt> value in the same codebase, the programmer must remember which meaning applies to which case. This can be improved to connascence of name by returning an explicit object that represents the case in question:</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_user_in_database</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">database</span><span class="o">.</span><span class="n">find_user</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ObjectNotFound</span>
    <span class="k">except</span> <span class="n">DatabaseError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
<p>We still have connascence of meaning in the error case, but at least the <tt class="docutils literal">None</tt> value is no longer ambiguous. The error case could also be improved to connascence of name in a similar way.</p>
<p>Another common example of connascence of meaning is when we use primitive numeric types to represent more complex values. Consider this line of code in a codebase that processes payments:</p>
<div class="highlight"><pre><span></span><span class="n">unit_cost</span> <span class="o">=</span> <span class="mf">49.95</span>
</pre></div>
<p>What currency is that cost expressed in? US dollars? British pounds? How do you ensure that two costs with different currencies are not added together? Similar to the examples above, the problem is that a semantic meaning is being added to the primitive type. It can be improved to connascence of type by creating a 'Cost' type that disallows operations between different currencies:</p>
<div class="highlight"><pre><span></span><span class="n">unit_cost</span> <span class="o">=</span> <span class="n">Cost</span><span class="p">(</span><span class="mf">49.95</span><span class="p">,</span> <span class="s1">&#39;USD&#39;</span><span class="p">)</span>
</pre></div>
<p>This particular problem is often called &quot;<strong>Primitive Obsession</strong>&quot;, and can be generically described as using primitive data types to represent more complex domains.</p>

  </div><!-- /.entry-content -->
</section>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p class="text-muted"><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
      </div>
    </footer>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://connascence.io/theme/js/bootstrap.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-66884952-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>